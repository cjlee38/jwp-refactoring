# kitchenpos refactoring

## 1단계
- [x] `kitchenpos` 패키지의 코드를 보고 키친포스의 요구 사항을 `README.md`에 작성한다.
- [x] 정리한 키친포스의 요구 사항을 토대로 테스트 코드를 작성한다. 모든 Business Object에 대한 테스트 코드를 작성한다.  
@SpringBootTest를 이용한 통합 테스트 코드 또는 @ExtendWith(MockitoExtension.class)를 이용한 단위 테스트 코드를 작성한다.

## 2단계
- [ ] 단위 테스트하기 어려운 코드와 단위 테스트 가능한 코드를 분리해 단위 테스트 가능한 코드에 대해 단위 테스트를 구현한다.
  - Spring Data JPA 사용 시 spring.jpa.hibernate.ddl-auto=validate 옵션을 필수로 준다.

## 작업 내용

### 1단계
- 기능 요구사항을 작성한다.
- 테스트 코드를 작성한다.

### 2단계
- 도메인과 DTO를 분리한다.
- JPA를 적용한다.

### 3단계
- 도메인을 정리한다.
- 쿼리를 개선한다.
- 패키지간 의존성을 확인한 뒤 정리한다.

## 기능 요구사항

### Menu
- 메뉴 그룹
  - 메뉴 그룹을 생성한다.
  - 메뉴 그룹의 목록을 조회한다.
- 메뉴
  - 메뉴를 생성한다.
    - 메뉴의 가격은 0원 이상이여야 한다.
    - 이미 존재하는 메뉴 그룹에 포함되어야 한다. 
    - 이미 존재하는 메뉴 상품을 포함해야 한다.
    - 메뉴의 가격은 메뉴의 상품가격 합계보다 작거나 같아야 한다.
  - 메뉴의 목록을 조회한다.

### Table
- 테이블 그룹
  - 테이블 그룹을 생성한다.
    - 주문 테이블의 목록은 2개 이상이어야 한다.
    - 이미 존재하는 주문 테이블의 목록을 포함해야 한다.
      - 각 주문 테이블은 '비어있지 않음' 이어야 한다.
      - 각 주문 테이블의 상태를 '비어있음'으로 전환한다.
      - 각 주문 테이블은 기존 테이블 그룹에 포함되지 않아야 한다.
      - 각 주문 테이블을 생성한 테이블 그룹에 포함한다.
    - 테이블 그룹의 생성일을 저장한다.
  - 테이블 그룹을 해제한다.
    - 각 주문 테이블의 주문이 '조리' 상태이거나 '식사' 상태라면 해제할 수 없다.
- 주문 테이블
  - 주문 테이블을 생성한다.
  - 주문 테이블의 목록을 조회한다.
  - 주문 테이블의 상태를 '비어있음' 또는 '비어있지 않음'으로 전환한다.
    - 주문 테이블은 기존 테이블 그룹에 포함되지 않아야 한다.
    - 주문 테이블의 주문이 '조리' 상태이거나 '식사' 상태라면 상태를 전환할 수 없다.
  - 주문 테이블의 손님 수를 변경한다.
    - 손님의 수는 0명 이하일 수 없다.
    - 기존에 주문 테이블이 존재해야 한다.
    - 주문 테이블의 상태가 '비어있지 않음'이어야 한다.

### Order
- 주문
  - 주문을 생성한다.
    - 주문 항목이 최소 한 개 이상 있어야 한다.
    - 이미 존재하는 메뉴를 포함해야 한다.
    - 이미 존재하는 주문 테이블에 포함되어야 한다.
    - 주문 테이블의 상태가 '비어있지 않음'이어야 한다.
    - 주문의 상태를 '조리' 상태로 변경한다.
    - 주문한 날짜/시각을 저장한다.
  - 주문 목록을 조회한다.
  - 주문의 상태를 변경한다.
    - 기존에 주문이 존재해야 한다. 
    - 기존 주문의 상태가 '조리' 또는 '식사' 여야 한다.

### Product
- 상품을 생성한다.
  - 상품의 가격은 0원 이상이어야 한다.
- 상품의 목록을 조회한다.

